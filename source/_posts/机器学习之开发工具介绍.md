---
title: 机器学习之开发工具介绍
date: 2018-12-31 19:42:30
categories: 机器学习
tags:
    - 机器学习
    - Python
cover_picture: images/ml.jpg
---
<!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=default"></script> -->


本文介绍使用Python进行机器学习过程中经常使用的两个工具, 即 IPython 和 Jupyter. 



IPython
------------


IPython实际上是一个加强的Python命令行工具, 与直接使用Python命令行相比, IPython具有代码提示, 魔术指令, 语法高亮等增强功能, 因此更适合在命令行中使用.

### 基本操作

IPython提供了一个类EMACS的快捷键方案, 比较常用的指令如下

指令     | 作用
--------|--------------------------------------
C+A     | 移动到本行的开头
C+E     | 移动到本行的末尾
C+U     | 删除光标所在位置之前的所有字符
C+K     | 删除光标所在位置以及之后的所有字符
C+L     | 清除屏幕
C+P     | 向前(Previous)移动
C+N     | 向后(Next)移动

### 魔术指令

魔术指令(The magic function)是IPython提供的一系列的指令, 这些指令可以对IPython本身或者Python进行控制. 魔术指令分为面向行的指令(line-oriented)和面向块的指令(cell-oriented). 

面向行的指令以`%`开头, 面向块的指令以`%%`开头. IPython默认启动`%automagic`, 因此输入面向行的指令时, 可以省略`%`, 但是面向块的指令始终需要以`%%`开头.

以下是一些常用的魔术指令


指令                | 效果
--------------------|---------------------------------------------
%quickref           | 显示IPython简要的文档
%magic              | 显示所有的魔术指令详细文档 
%reset              | 删除当前环境下所有的指令  
%rehashx            | 使大部分shell指令不需要`!`就直接执行
%run                | 运行一个脚本,并将其中的变量导入
%who/whos           | 显示当前的变量
%timeit             | 统计一条指令消耗的时间
%matplotlib inline  | 启用IPython对绘图的额外支持

### 帮助系统

在任意指令的开头或者结尾加上一个`?`即可查询此模块/函数的文档. 使用`??`可以查询文档和源代码(如果有源代码). 

此外, 帮助系统还支持使用`*`进行搜索, 例如`np.*load*?`将会显示numpy包中所有包含load的函数.


### 输入和输出变量

IPython中使用`_`和`__`保存了最近的两个输出结果. 每一行的输入和输出也都保存在相应的变量之中. 例如`_2`保存了第二行的输入, `_i2`保存了第二行的输出结果.

IPython的这一保存机制将导致所有的对象都始终存在引用, 而无法被垃圾回收. 如果在使用过程中会频繁的创建大对象, 注意使用%xdel来删除不必要的引用, 或者使用%reset来重置.

### 与OS交互

在IPython中可以执行任意shell指令, 只需要在相应的指令之前加上一个`!`. 一些常见的指令如下表所示

指令                 | 说明
--------------------|-------------------------------------------
`! <cmd>`           | 执行shell执行
`out = !<cmd>`      | 将shell执行结果赋值给out变量
`%bookmark`         | 启用IPython目录书签系统
`%pushd`/`%popd`    | 使用堆栈效果的目录切换
`%env`              | 显示环境变量

使用`%bookmark <name> <path>`的格式, 给`<path>`创建一个名称, 之后就可以使用`<name>`代表这个路径进行切换. bookmark的操作是自动持久化的. 使用`-l`参数可以列出所有创建的书签.


Jupyter
---------------

Jupyter notebook是一个基于Web的图形编程界面, 可以在其中编写Markdown文本和Python代码, 并且直接运行其中的代码. 除了在网页上直接展示以外, Jupyter还支持将页面保存为Markdowm, HTML, pdf 等多种格式.

在命令行中输入`jupyer notebook`来启动程序.

### 常用命令

Jupyter采用了类似VIM的键位, 因此对于VIM的常见操作(移动, 添加, 删除等)都是同样的快捷键. 下面是一些常用的指令

指令     | 作用
--------|--------------------------------------
Esc     | 进入命令模式
Enter   | 进入编辑模式
A       | 在当前Cell之上插入一个新的Cell
B       | 在当前Cell之下插入一个新的Cell
C+Enter | 执行当前Cell代码
M+Enter | 执行当前Cell代码,并且移动到下一个Cell


除了以上的指令以外, 还可以在点击`Help->Keyboard Shortcut`查看全部的快捷键, 点击`Help->User Interface Tour`查看用户界面引导.


我的看法
-------------

虽然只要随便搜索一下, 就可以看到很多文章推荐使用这两个工具. 但我个人的体验是这两个工具对于初学者来说, 都不太顺手. 

IPython的解释执行机制不太适合需要反复执行某一段代码的场景. 如果执行的代码都是单一的语句, 那么IPython用起来还是非常舒服的, 但如果涉及到更复杂的结构, 例如循环语句或者定义函数, 那么这种一行一行输入的模式显然就不太合适了. 对于这个问题, Jupyter有一定程度的弥补, 但Jupyter的代码补全不太好用, 如果不熟悉库的参数, Jupyter的体验就如同记事本写代码.

因此, 如果对使用的库非常熟悉了, 那么可以考虑使用Jupyter, 但如果是新学习一个库, 那么还是建议先使用一个有更友好的代码补全和文档的IDE.
